<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examples in R • concurve</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Examples in R">
<meta property="og:description" content="">
<meta property="og:image" content="https://data.lesslikely.com/concurve/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">concurve</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/examples.html">Examples in R</a>
    </li>
    <li>
      <a href="../articles/stata.html">Using Stata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Zadchow/concurve">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Examples in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Zadchow/concurve/blob/master/vignettes/examples.Rmd"><code>vignettes/examples.Rmd</code></a></small>
      <div class="hidden name"><code>examples.Rmd</code></div>

    </div>

    
    
<div id="using-mean-differences" class="section level2">
<h2 class="hasAnchor">
<a href="#using-mean-differences" class="anchor"></a>Using Mean Differences</h2>
<p>If we were to generate some random data from a normal distribution with the following code,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">GroupA &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">GroupB &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4">RandomData &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(GroupA, GroupB)</a></code></pre></div>
<p>and compare the means of these two “groups” using a t-test,</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">testresults &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span>(GroupA, GroupB, <span class="dt">data =</span> RandomData, <span class="dt">paired =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>we would likely see some differences, given that we have such a small sample in each group.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(testresults)</a></code></pre></div>
<p>We can see our P-value for the statistical test along with the computed 95% interval with the command above (which is given to us by default by the program). Thus, effect sizes that range from the lower bound of this interval to the upper bound are compatible with the test model at this consonance level.</p>
<p>However, as stated before, a 95% interval is only an artifact of the commonly used 5% alpha level for hypothesis testing and is nowhere near as informative as a function.</p>
<p>If we were to take the information from this data and calculate a P-value function where every single consonance interval and its corresponding P-value were plotted, we would be able to see the full range of effect sizes compatible with the test model at various levels.</p>
<p>It is relatively easy to produce such a function using the <span style="color:#d46c5b"><a href="https://github.com/Zadchow/concurve"><strong>concurve</strong></a></span> package in R.</p>
<p>Install the package directly from <a href="https://cran.r-project.org/package=concurve">CRAN</a></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"concurve"</span>)</a></code></pre></div>
<p>or get a more slightly up-to-date version via GitHub.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"zadchow/concurve"</span>)</a></code></pre></div>
<p>We’ll use the same data from above to calculate a P-value function and since we are focusing on mean differences using a t-test, we will use the <code><a href="../reference/curve_meta.html">curve_meta()</a></code> function to calculate our consonance intervals and store them in a dataframe.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(concurve)</a>
<a class="sourceLine" id="cb6-2" title="2">intervalsdf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/curve_mean.html">curve_mean</a></span>(GroupA, GroupB,</a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">data =</span> RandomData, <span class="dt">method =</span> <span class="st">"default"</span></a>
<a class="sourceLine" id="cb6-4" title="4">)</a></code></pre></div>
<p>Now thousands of consonance intervals at various levels have been stored in the dataframe “intervalsdf.” We can preview some of the entries via the <code>tibble</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(intervalsdf)</a></code></pre></div>
<p>There’s a quick look at the first few entries of our dataframe.</p>
<p>We can plot this data using the <code><a href="../reference/ggconcurve.html">ggconcurve()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">pfunction &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"consonance"</span>, intervalsdf)</a>
<a class="sourceLine" id="cb8-2" title="2">pfunction</a></code></pre></div>
<center>
<img src="figures/function1.png" align="center" width="600">
</center>
<p>Now we can see every consonance interval and its corresponding P-value and consonance level plotted. As stated before, a single 95% consonance interval is simply a slice through this function, which provides far more information as to what is compatible with the test model and its assumptions.</p>
<p>Furthermore, we can also produce a “surprisal” function by plotting every consonance interval and its corresponding <span style="color:#d46c5b"><a href="https://lesslikely.com/statistics/s-values/"><strong><em>S-value</em></strong></a></span> using the <code><a href="../reference/ggconcurve.html">ggconcurve()</a></code> function with type being set as “surprisal”.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">sfunction &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"surprisal"</span>, intervalsdf)</a>
<a class="sourceLine" id="cb9-2" title="2">sfunction</a></code></pre></div>
<center>
<img src="figures/function2.png" align="center" width="600">
</center>
<p>The graph from the code above provides us with consonance levels and the maximum amount of information against the effect sizes contained in the consonance interval.</p>
</div>
<div id="simple-linear-models" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-linear-models" class="anchor"></a>Simple Linear Models</h2>
<p>We can also try this with other simple linear models.</p>
<p>Let’s simulate more normal data and fit a simple linear regression to it using ordinary least squares regression with the base R <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">GroupA2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="dv">500</span>)</a>
<a class="sourceLine" id="cb10-2" title="2">GroupB2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="dv">500</span>)</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">RandomData2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(GroupA2, GroupB2)</a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6">model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(GroupA2 <span class="op">~</span><span class="st"> </span>GroupB2, <span class="dt">data =</span> RandomData2)</a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(model)</a></code></pre></div>
<p>We can see some of the basic statistics of our model including the 95% interval for our predictor (GroupB). Perhaps we want more information. Well we can do that! Using the <code><a href="../reference/curve_gen.html">curve_gen()</a></code>, we can calculate several consonance intervals for the regression coefficient and then plot the consonance and surprisal functions.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">randomframe &lt;-<span class="st"> </span><span class="kw"><a href="../reference/curve_gen.html">curve_gen</a></span>(model, <span class="st">"GroupB2"</span>)</a>
<a class="sourceLine" id="cb11-2" title="2">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(randomframe)</a></code></pre></div>
<p>Now that we have our data frame, we can graph our function.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"consonance"</span>, randomframe)</a></code></pre></div>
<center>
<img src="figures/function3.png" align="center" width="600">
</center>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">s &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"surprisal"</span>, randomframe)</a>
<a class="sourceLine" id="cb13-2" title="2">s</a></code></pre></div>
<center>
<img src="figures/function4.png" align="center" width="600">
</center>
<p>We can also compare these functions to likelihood functions (also called support intervals), and we’ll see that we get very similar results. We’ll do this using the <strong><em>ProfileLikelihood</em></strong> package.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">xx &lt;-<span class="st"> </span><span class="kw">profilelike.lm</span>(</a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="dt">formula =</span> GroupA2 <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> RandomData2,</a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="dt">profile.theta =</span> <span class="st">"GroupB2"</span>,</a>
<a class="sourceLine" id="cb14-4" title="4">  <span class="dt">lo.theta =</span> <span class="fl">-0.3</span>, <span class="dt">hi.theta =</span> <span class="fl">0.3</span>, <span class="dt">length =</span> <span class="dv">500</span></a>
<a class="sourceLine" id="cb14-5" title="5">)</a></code></pre></div>
<p>Now we plot our likelihood function and we can see what the maximum likelihood estimation is. Notice that it’s practically similar to the interval in the S-value function with 0 bits of information against it and and the consonance interval in the P-value function with a P-value of 1.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">profilelike.plot</span>(</a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="dt">theta =</span> xx<span class="op">$</span>theta,</a>
<a class="sourceLine" id="cb15-3" title="3">  <span class="dt">profile.lik.norm =</span> xx<span class="op">$</span>profile.lik.norm, <span class="dt">round =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb15-4" title="4">)</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="kw"><a href="https://rdrr.io/r/graphics/title.html">title</a></span>(<span class="dt">main =</span> <span class="st">"Likelihood Function"</span>)</a></code></pre></div>
<center>
<img src="figures/likelihood.png" align="center" width="600">
</center>
<p>We’ve used a relatively easy example for this blog post, but the <span style="color:#d46c5b"><a href="https://github.com/Zadchow/concurve"><strong>concurve</strong></a></span> package is also able to calculate consonance functions for multiple regressions, logistic regressions, ANOVAs, and meta-analyses (that have been produced by the <strong><em>metafor</em></strong> package).</p>
</div>
<div id="using-meta-analysis-data" class="section level2">
<h2 class="hasAnchor">
<a href="#using-meta-analysis-data" class="anchor"></a>Using Meta-Analysis Data</h2>
<p>Here we present another quick example with a meta-analysis of simulated data.</p>
<p>First, we generate random data for two groups in two hypothetical studies</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">GroupAData &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">20</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb16-2" title="2">GroupAMean &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(GroupAData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-3" title="3">GroupASD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(GroupAData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-4" title="4"></a>
<a class="sourceLine" id="cb16-5" title="5">GroupBData &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">20</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb16-6" title="6">GroupBMean &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(GroupBData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-7" title="7">GroupBSD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(GroupBData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-8" title="8"></a>
<a class="sourceLine" id="cb16-9" title="9">GroupCData &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">20</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb16-10" title="10">GroupCMean &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(GroupCData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-11" title="11">GroupCSD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(GroupCData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-12" title="12"></a>
<a class="sourceLine" id="cb16-13" title="13">GroupDData &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">20</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb16-14" title="14">GroupDMean &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(GroupDData), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-15" title="15">GroupDSD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(GroupDData), <span class="dt">digits =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>We can then quickly combine the data in a dataframe.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">StudyName &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Study1"</span>, <span class="st">"Study2"</span>)</a>
<a class="sourceLine" id="cb17-2" title="2">MeanTreatment &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(GroupAMean, GroupCMean)</a>
<a class="sourceLine" id="cb17-3" title="3">MeanControl &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(GroupBMean, GroupDMean)</a>
<a class="sourceLine" id="cb17-4" title="4">SDTreatment &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(GroupASD, GroupCSD)</a>
<a class="sourceLine" id="cb17-5" title="5">SDControl &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(GroupBSD, GroupDSD)</a>
<a class="sourceLine" id="cb17-6" title="6">NTreatment &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">20</span>, <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb17-7" title="7">NControl &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">20</span>, <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb17-8" title="8"></a>
<a class="sourceLine" id="cb17-9" title="9">metadf &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</a>
<a class="sourceLine" id="cb17-10" title="10">  StudyName, MeanTreatment, MeanControl,</a>
<a class="sourceLine" id="cb17-11" title="11">  SDTreatment, SDControl,</a>
<a class="sourceLine" id="cb17-12" title="12">  NTreatment, NControl</a>
<a class="sourceLine" id="cb17-13" title="13">)</a></code></pre></div>
<p>Then, we’ll use <strong><em>metafor</em></strong> to calculate the standardized mean difference.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">dat &lt;-<span class="st"> </span><span class="kw">escalc</span>(</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="dt">measure =</span> <span class="st">"SMD"</span>,</a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">m1i =</span> MeanTreatment, <span class="dt">sd1i =</span> SDTreatment, <span class="dt">n1i =</span> NTreatment,</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">m2i =</span> MeanControl, <span class="dt">sd2i =</span> SDControl, <span class="dt">n2i =</span> NControl,</a>
<a class="sourceLine" id="cb18-5" title="5">  <span class="dt">data =</span> metadf</a>
<a class="sourceLine" id="cb18-6" title="6">)</a></code></pre></div>
<p>Next, we’ll pool the data using a <del>fixed-effects</del> common-effects model</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">res &lt;-<span class="st"> </span><span class="kw">rma</span>(yi, vi,</a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="dt">data =</span> dat, <span class="dt">slab =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(StudyName, <span class="dt">sep =</span> <span class="st">", "</span>),</a>
<a class="sourceLine" id="cb19-3" title="3">  <span class="dt">method =</span> <span class="st">"FE"</span>, <span class="dt">digits =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-4" title="4">)</a></code></pre></div>
<p>Let’s look at our output.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">res</a></code></pre></div>
<pre><code>Fixed-Effects Model (k = 2)

Test for Heterogeneity: 
Q(df = 1) = 0.61, p-val = 0.44

Model Results:

estimate    se  zval  pval  ci.lb  ci.ub 
    0.16  0.22  0.73  0.47  -0.28   0.60  

---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 </code></pre>
<p>Take a look at the pooled summary effect and its interval. Keep it in mind as we move onto constructing a consonance function.</p>
<p>We can now take the object produced by the meta-analysis and calculate a P-value and S-value function with it to see the full spectrum of effect sizes compatible with the test model at every level. We’ll use the <code><a href="../reference/curve_meta.html">curve_meta()</a></code> function to do this.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">metaf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/curve_meta.html">curve_meta</a></span>(res)</a>
<a class="sourceLine" id="cb22-2" title="2">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(metaf)</a></code></pre></div>
<p>Now that we have our dataframe with every computed interval, we can plot the functions.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"consonance"</span>, metaf)</a></code></pre></div>
<center>
<img src="figures/function5.png" align="center" width="600">
</center>
<p>And our S-value function</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw"><a href="../reference/ggconcurve.html">ggconcurve</a></span>(<span class="dt">type =</span> <span class="st">"surprisal"</span>, metaf)</a></code></pre></div>
<center>
<img src="figures/function6.png" align="center" width="600">
</center>
<p>Compare the span of these functions and the information they provide to the consonance interval provided by the forest plot. We are now no longer limited to interpreting an arbitrarily chosen interval by mindless analytic decisions often built into statistical packages by default.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#using-mean-differences">Using Mean Differences</a></li>
      <li><a href="#simple-linear-models">Simple Linear Models</a></li>
      <li><a href="#using-meta-analysis-data">Using Meta-Analysis Data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://lesslikely.com/">Zad R. Chow</a>, <a href="https://www.researchgate.net/profile/Andrew_Vigotsky">Andrew D. Vigotsky</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '328a30be91979e947c28ffd52f604eda',
    indexName: 'lesslikely-concurve',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
